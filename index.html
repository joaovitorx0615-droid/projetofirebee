<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Dashboard de Produção</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;700&family=DM+Sans:wght@400;500;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="./styles.css?v=20260225-2" />
</head>
<body>
  <div id="system-alert" class="system-alert hidden" role="status" aria-live="polite"></div>
  <div id="system-note" class="system-note hidden" role="status" aria-live="polite"></div>
  <button id="quality-toggle-btn" class="quality-toggle-btn" type="button">Qualidade</button>
  <aside id="quality-panel" class="quality-panel hidden">
    <div class="quality-head">
      <h3>Qualidade</h3>
      <button id="quality-close-btn" type="button" class="quality-close-btn" aria-label="Fechar">X</button>
    </div>
    <section class="quality-section quality-indicator">
      <h4>Indicador de reprovados</h4>
      <div class="quality-indicator-wrap">
        <canvas id="quality-rejected-chart"></canvas>
      </div>
    </section>
    <section class="quality-section">
      <h4>Aguardando teste</h4>
      <div id="quality-awaiting-list" class="quality-list"></div>
    </section>
    <section class="quality-section">
      <h4>Teste concluido</h4>
      <div id="quality-done-list" class="quality-list"></div>
    </section>
  </aside>
  <main class="app-shell">
    <div class="top-layout-spacer">
      <img src="./Screenshot_4.jpg" alt="Marca da empresa" class="top-company-logo" />
    </div>
    <header class="hero">
      <div>
        <p class="eyebrow">Planejamento 2026</p>
        <h1>Equipamentos para Producao </h1>
        <p class="subtitle">Visualizacao moderna do consumo mensal por produto.</p>
      </div>
      <div class="hero-actions">
        <button id="reload-btn" class="btn">Recarregar CSV</button>
        <label class="file-btn">
          Carregar outro CSV
          <input id="csv-input" type="file" accept=".csv,text/csv" />
        </label>
      </div>
    </header>

    <section class="chart-card">
      <div class="chart-columns">
        <article class="chart-panel devices-panel">
          <div class="chart-head">
            <h2>Aguardando inicio</h2>
            <p>Painel limpo para acompanhar e registrar conforme os pedidos.</p>
          </div>
          <div id="device-picker-tools" class="device-picker-tools collapsed">
            <input id="device-picker-search" type="search" placeholder="Pesquisar dispositivo por sigla ou codigo..." />
          </div>
          <div id="sigla-buttons" class="sigla-buttons"></div>
        </article>
        <article class="chart-panel status-panel">
          <div class="chart-head status-head">
            <h2>Em andamento</h2>
            <p>Dispositivos salvos com progresso de producao.</p>
          </div>
          <div id="saved-devices" class="saved-devices"></div>
        </article>
        <article class="chart-panel status-panel">
          <div class="chart-head status-head">
            <h2>Finalizado</h2>
            <p>Itens concluidos automaticamente.</p>
          </div>
          <div id="done-devices" class="saved-devices"></div>
        </article>
      </div>
    </section>

    <section class="table-card">
      <div class="table-tools">
        <input id="search-input" type="search" placeholder="Buscar por sigla ou codigo..." />
        <select id="sort-select">
          <option value="total-desc">Maior total anual</option>
          <option value="total-asc">Menor total anual</option>
          <option value="sigla-asc">Sigla A-Z</option>
          <option value="sigla-desc">Sigla Z-A</option>
        </select>
      </div>
      <div class="table-wrap">
        <table id="data-table">
          <thead></thead>
          <tbody></tbody>
        </table>
      </div>
    </section>

    <section class="trends-card">
      <article class="trend-box">
        <h3>Produzido Semanal</h3>
        <canvas id="weekly-produced-chart"></canvas>
      </article>
      <article class="trend-box">
        <h3>Produzido Mensal</h3>
        <canvas id="monthly-produced-chart"></canvas>
      </article>
      <article class="trend-box">
        <h3>Produzido Anual</h3>
        <canvas id="annual-produced-chart"></canvas>
      </article>
    </section>
  </main>

  <dialog id="chart-modal" class="chart-modal">
    <div class="modal-head">
      <h3 id="modal-title">Grafico</h3>
      <button id="modal-close" type="button" class="modal-close" aria-label="Fechar">X</button>
    </div>
    <div class="modal-body">
      <section class="production-panel">
        <div class="prod-field">
          <label for="target-input">A Produzir</label>
          <input id="target-input" type="number" min="0" step="1" />
        </div>
        <div class="prod-field">
          <label for="done-input">Produzido</label>
          <input id="done-input" type="number" min="0" step="1" />
        </div>
        <div class="prod-summary">
          <span>Falta</span>
          <strong id="remaining-output">0</strong>
          <small id="calc-output">Calculo: 0 - 0 = 0</small>
          <button id="save-production-btn" type="button" class="btn-save">Salvar</button>
        </div>
      </section>
      <div class="modal-chart-hex">
        <canvas id="modal-chart"></canvas>
      </div>
    </div>
  </dialog>

  <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
  <script src="./app.js?v=20260225-2"></script>
</body>
</html>
